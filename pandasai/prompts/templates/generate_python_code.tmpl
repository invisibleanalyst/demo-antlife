{% for df in context.dfs %}{% set index = loop.index %}{% include 'shared/dataframe.tmpl' with context %}{% endfor %}

{% if context.skills_manager.has_skills() %}
{{context.skills_manager.prompt_display()}}
{% endif %}

{{ context.memory.get_previous_conversation() }}

{% if last_code_generated != "" and context.memory.count() > 0 %}
{{ last_code_generated }}
{% else %}
Update this initial code:
```python
# TODO: import the required dependencies
import pandas as pd

# Write code here

# Declare result var: {% include 'shared/output_type_template.tmpl' with context %}
```
{% endif %}
{% if context.vectorstore %}{% set documents = context.vectorstore.get_relevant_qa_documents(context.memory.get_last_message()) %}
{% if documents|length > 0%}You can utilize these examples as a reference for generating code.{% endif %}
{% for document in documents %}
{{ document}}{% endfor %}{% endif %}
{% if context.vectorstore %}{% set documents = context.vectorstore.get_relevant_docs_documents(context.memory.get_last_message()) %}
{% if documents|length > 0%}Here are additional documents for reference. Feel free to use them to answer.{% endif %}
{% for document in documents %}{{ document}}
{% endfor %}
{% endif %}

Here is the question for which you need to generate code for
{{ context.memory.get_last_message() }}

Variable `dfs: list[pd.DataFrame]` is already declared.

At the end, declare "result" variable as a dictionary of type and value.
{% if viz_lib %}
If you are asked to plot a chart, use "{{viz_lib}}" for charts, save as png.
{% endif %}

Generate python code and return full updated code: